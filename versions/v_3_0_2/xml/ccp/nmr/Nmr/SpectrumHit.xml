<?xml version="1.0"?>
<!--
#######################################################################

CCPN Data Model version 3.0.2

Autogenerated by XmlModelIo on ?
  from data model element ccp.nmr.Nmr.SpectrumHit

#######################################################################
======================COPYRIGHT/LICENSE START==========================

SpectrumHit.xml: xmlmodel model for CCPN data model, MetaClass ccp.nmr.Nmr.SpectrumHit

Copyright (C) 2007  (CCPN Project)

=======================================================================

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

A copy of this license can be found in ../../../../../../../../../license/LGPL.license

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA


======================COPYRIGHT/LICENSE END============================

for further information, please contact :

- CCPN website (http://www.ccpn.ac.uk/)

- email: ccpn@bioc.cam.ac.uk

=======================================================================

If you are using this software for academic purposes, we suggest
quoting the following references:

===========================REFERENCE START=============================
Rasmus H. Fogh, Wayne Boucher, Wim F. Vranken, Anne
Pajon, Tim J. Stevens, T.N. Bhat, John Westbrook, John M.C. Ionides and
Ernest D. Laue (2005). A framework for scientific data modeling and automated
software development. Bioinformatics 21, 1678-1684.


This file was generated with the Memops software generation framework,
and contains original contributions embedded in the framework

===========================REFERENCE END===============================
-->

<MetaClass name="SpectrumHit"
 guid="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
 container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:46_00006"
 isAbstract="false" isDerived="false" isImplicit="false" isLeaf="false"
 isRoot="false" isSingleton="false" partitionsChildren="false"
 visibility="public_vis">
  <keyNames>
    <item>substanceName</item>
    <item>sampledDimension</item>
    <item>sampledPoint</item>
  </keyNames>
  <supertypes>
    <item>www.ccpn.ac.uk_Fogh_2006-09-14-16:28:57_00005</item>
  </supertypes>


  <MetaAttribute name="concentration"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00007"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="concentration" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Concentration determined for hit - if the SPectrum is used for concentration estimation.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:54_00009</valueType>
  </MetaAttribute>

  <MetaAttribute name="concentrationError"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00008"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="concentrationError" changeability="changeable"
   forceUndoNotify="true" hicard="1" isAbstract="false" isAutomatic="false"
   isDerived="false" isImplementation="false" isImplicit="false"
   isOrdered="false" isUnique="true" locard="0" scope="instance_level"
   visibility="public_vis">
    <documentation>Estimated standard error in concentration value</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:54_00009</valueType>
  </MetaAttribute>

  <MetaAttribute name="concentrationUnit"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00009"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="concentrationUnit" changeability="changeable"
   forceUndoNotify="true" hicard="1" isAbstract="false" isAutomatic="false"
   isDerived="false" isImplementation="false" isImplicit="false"
   isOrdered="false" isUnique="true" locard="1" scope="instance_level"
   visibility="public_vis">
    <documentation>Unit of concentration measurement.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00005</valueType>
    <defaultValue>
      <item>M</item>
    </defaultValue>
  </MetaAttribute>

  <MetaRole name="dataSource"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00001"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   aggregation="composite" baseName="dataSource" changeability="frozen"
   forceUndoNotify="true" hicard="1" hierarchy="parent" isAbstract="false"
   isAutomatic="false" isDerived="false" isImplementation="false"
   isImplicit="false" isOrdered="false" isUnique="true" locard="1"
   noDeleteIfSet="false" partitionsChildren="false" scope="instance_level"
   visibility="public_vis">
    <otherRole>www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00002</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:46_00020</valueType>
  </MetaRole>

  <MetaAttribute name="details"
   guid="www.ccpn.ac.uk_Fogh_2009-11-19-14:51:56_00025"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="details" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Free text, for notes, explanatory comments, etc.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00035</valueType>
  </MetaAttribute>

  <MetaAttribute name="figureOfMerit"
   guid="www.ccpn.ac.uk_Fogh_2009-11-19-14:51:56_00023"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="figureOfMerit" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00058</valueType>
  </MetaAttribute>

  <MetaOperation name="getHasBeenInspected"
   guid="www.ccpn.ac.uk_Fogh_2012-05-18-12:27:54_00001"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived attribute hasBeenInspected.</documentation>
    <target>www.ccpn.ac.uk_Fogh_2012-05-18-12:04:57_00002</target>
    <codeStubs>
      <item tag="java">/* NBNB TBD */</item>
      <item tag="python">result = (self.isConfirmed is not None)</item>
    </codeStubs>
  </MetaOperation>

  <MetaOperation name="getRefComponent"
   guid="www.ccpn.ac.uk_Fogh_2012-03-28-17:22:44_00013"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived link refComponent</documentation>
    <target>www.ccpn.ac.uk_Fogh_2012-03-28-17:22:44_00010</target>
    <codeStubs>
      <item tag="python">result = None
sampleComponent = self.sampleComponent
if sampleComponent is None:
  name = self.substanceName
  sampleStore = self.topObject.sampleStore
  if sampleStore is not None:
    refSampleComponentStore = sampleStore.refSampleComponentStore
    if refSampleComponentStore is not None:
      result = refSampleComponentStore.findFirstComponent(name=name, labeling='std')
      if result is None:
        result = refSampleComponentStore.findFirstComponent(name=name)
else:
  result = sampleComponent.refComponent</item>
    </codeStubs>
  </MetaOperation>

  <MetaOperation name="getSample"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-18:33:59_00004"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived link sample</documentation>
    <target>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00001</target>
    <codeStubs>
      <item tag="python">dataSource = self.dataSource
result = dataSource.experiment.sample
if result is None:
  dim = self.sampledDimension
  pointNumber = self.sampledPoint
  if pointNumber and dim:
    sampledDim = dataSource.findFirstDataDim(className='SampledDimension', dim=dim)
    if sampledDim is not None:
      samples = sampledDim.samples
      if samples:
        result = samples[pointNumber - 1]
  </item>
    </codeStubs>
  </MetaOperation>

  <MetaOperation name="getSampleComponent"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-18:33:59_00005"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived link SampleComponent</documentation>
    <target>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00005</target>
    <codeStubs>
      <item tag="python">sample = self.sample
if sample is None:
  result = None
else:
  result = sample.findFirstSampleComponent(name=name, labeling='std')
  if result is None:
    result = sample.findFirstSampleComponent(name=name)</item>
    </codeStubs>
  </MetaOperation>

  <MetaAttribute name="hasBeenInspected"
   guid="www.ccpn.ac.uk_Fogh_2012-05-18-12:04:57_00002"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="hasBeenInspected" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>Has hit been manually inspected?</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00028</valueType>
  </MetaAttribute>

  <MetaAttribute name="isConfirmed"
   guid="www.ccpn.ac.uk_Fogh_2012-05-18-12:04:57_00001"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="isConfirmed" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Has the hit been manually confirmed as a hit? NB the attribute reflects three states. True means 'has been confirmed', False means 'has been inspected but not confirmed', and None means 'has not been inspected'. See hasBeenInspected attribute.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00028</valueType>
  </MetaAttribute>

  <MetaAttribute name="meritCode"
   guid="www.ccpn.ac.uk_Fogh_2009-11-19-14:51:56_00024"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="meritCode" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00037</valueType>
  </MetaAttribute>

  <MetaAttribute name="normalisedChange"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00006"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="normalisedChange" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Normalized size of effect (normally intensity change). limited to range -1 &lt;= x &lt;= 1. Positive values are large changes, negative values changes in the 'wrong' direction, e.g. intensity increase where a decrease was expected.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00031</valueType>
  </MetaAttribute>

  <MetaRole name="refComponent"
   guid="www.ccpn.ac.uk_Fogh_2012-03-28-17:22:44_00010"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="refComponent" changeability="frozen" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>RefSampleComponent corresponding to this SpectrumHit</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:52_00057</valueType>
  </MetaRole>

  <MetaRole name="spectrumHits"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00002"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00001"
   baseName="spectrumHit" changeability="frozen" forceUndoNotify="true"
   hicard="-1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>SpectrumHits found in Sample</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00001</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010</valueType>
  </MetaRole>

  <MetaRole name="sample"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00001"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="sample" changeability="frozen" forceUndoNotify="true" hicard="1"
   isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>Sample where spectrumHit is found</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00002</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00001</valueType>
  </MetaRole>

  <MetaRole name="spectrumHits"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00006"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="spectrumHit" changeability="frozen" forceUndoNotify="true"
   hicard="-1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>SPectrumHits involving SampleComponent</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00005</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010</valueType>
  </MetaRole>

  <MetaRole name="sampleComponent"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00005"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="sampleComponent" changeability="frozen" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>SampleComponent found in Spectrumhit</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00006</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002</valueType>
  </MetaRole>

  <MetaAttribute name="sampledDimension"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00003"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="sampledDimension" changeability="frozen" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>Sampled Dimension associated with hit - for cases where hit is only associated with one point in a Sampled Dimension. Value '0' means the hit is associated with the entire spectrum.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:54_00011</valueType>
    <defaultValue>
      <item>0</item>
    </defaultValue>
  </MetaAttribute>

  <MetaAttribute name="sampledPoint"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00004"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="sampledPoint" changeability="frozen" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>Sampled Dimension point associated with hit - for cases where hit is only associated with one poiint in a Sampled Dimension. Value '0' means the hit is associated with the entire spectrum. NOTE. The first point is point 1, NOT point 0.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:54_00011</valueType>
    <defaultValue>
      <item>0</item>
    </defaultValue>

    <!-- Start constraints for <MetaAttribute: ccp.nmr.Nmr.SpectrumHit.sampledPoint>: -->
    <MetaConstraint name="sampled_point_requires_sampled_dimension"
     guid="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00005"
     container="www.ccpn.ac.uk_Fogh_2015-06-22-16:03:07_00004"
     isImplicit="false">
      <codeStubs>
        <item tag="python">not bool(value) and not self.sampledDimension</item>
      </codeStubs>
    </MetaConstraint>
    <!-- End constraints for <MetaAttribute: ccp.nmr.Nmr.SpectrumHit.sampledPoint>: -->
  </MetaAttribute>

  <MetaOperation name="setHasBeenInspected"
   guid="www.ccpn.ac.uk_Fogh_2012-05-18-12:27:54_00002"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   isAbstract="false" isImplicit="false" isQuery="false" opType="set"
   scope="instance_level" visibility="public_vis">
    <documentation>setter for derived attribute hasBeenInspected</documentation>
    <target>www.ccpn.ac.uk_Fogh_2012-05-18-12:04:57_00002</target>
    <codeStubs>
      <item tag="java">/* NBNB TBD */</item>
      <item tag="python">if value:
  if self.isConfirmed is None:
    self.isConfirmed = False
else:
  self.isConfirmed = None</item>
    </codeStubs>
  </MetaOperation>

  <MetaAttribute name="substanceName"
   guid="www.ccpn.ac.uk_Fogh_2012-03-28-17:22:44_00011"
   container="www.ccpn.ac.uk_Fogh_2009-11-19-14:50:32_00010"
   baseName="substanceName" changeability="frozen" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>Name of RefSampleComponent the hit refers to. Key for derived links to SampleComponent, RefSampleComponent, and Substance</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00033</valueType>
  </MetaAttribute>
</MetaClass>

