<?xml version="1.0"?>
<!--
#######################################################################

CCPN Data Model version 3.0.2

Autogenerated by XmlModelIo on ?
  from data model element ccp.lims.Sample.SampleComponent

#######################################################################
======================COPYRIGHT/LICENSE START==========================

SampleComponent.xml: xmlmodel model for CCPN data model, MetaClass ccp.lims.Sample.SampleComponent

Copyright (C) 2007  (CCPN Project)

=======================================================================

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

A copy of this license can be found in ../../../../../../../../../license/LGPL.license

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA


======================COPYRIGHT/LICENSE END============================

for further information, please contact :

- CCPN website (http://www.ccpn.ac.uk/)

- email: ccpn@bioc.cam.ac.uk

=======================================================================

If you are using this software for academic purposes, we suggest
quoting the following references:

===========================REFERENCE START=============================
Rasmus H. Fogh, Wayne Boucher, Wim F. Vranken, Anne
Pajon, Tim J. Stevens, T.N. Bhat, John Westbrook, John M.C. Ionides and
Ernest D. Laue (2005). A framework for scientific data modeling and automated
software development. Bioinformatics 21, 1678-1684.


This file was generated with the Memops software generation framework,
and contains original contributions embedded in the framework

===========================REFERENCE END===============================
-->

<MetaClass name="SampleComponent"
 guid="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
 container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:43_00002"
 isAbstract="false" isDerived="false" isImplicit="false" isLeaf="false"
 isRoot="false" isSingleton="false" partitionsChildren="false"
 visibility="public_vis">
  <documentation>The information on the sample component. One component is one element of the contents of the sample.</documentation>
  <keyNames>
    <item>name</item>
    <item>labeling</item>
  </keyNames>
  <supertypes>
    <item>www.ccpn.ac.uk_Fogh_2006-09-14-16:28:57_00005</item>
  </supertypes>


  <MetaAttribute name="chainCodes"
   guid="www.ccpn.ac.uk_Fogh_2015-08-14-16:14:51_00001"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="chainCode" changeability="changeable" forceUndoNotify="true"
   hicard="-1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="true" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Molsystem.Chain.code for chains that match component.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00037</valueType>

    <!-- Start constraints for <MetaAttribute: ccp.lims.Sample.SampleComponent.chainCodes>: -->
    <MetaConstraint name="SampleComponent_chainCodes_are_unique_if_set"
     guid="www.ccpn.ac.uk_Fogh_2015-08-14-16:15:42_00001"
     container="www.ccpn.ac.uk_Fogh_2015-08-14-16:14:51_00001"
     isImplicit="false">
      <codeStubs>
        <item tag="python">value is None or not any(x for x in self.sample.sampleComponents if x is not self and value in x.chainCodes)</item>
      </codeStubs>
    </MetaConstraint>
    <!-- End constraints for <MetaAttribute: ccp.lims.Sample.SampleComponent.chainCodes>: -->
  </MetaAttribute>

  <MetaAttribute name="concentration"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:44_00001"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="concentration" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Concentration of the component in the sample.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00031</valueType>
  </MetaAttribute>

  <MetaAttribute name="concentrationError"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:44_00002"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="concentrationError" changeability="changeable"
   forceUndoNotify="true" hicard="1" isAbstract="false" isAutomatic="false"
   isDerived="false" isImplementation="false" isImplicit="false"
   isOrdered="false" isUnique="true" locard="0" scope="instance_level"
   visibility="public_vis">
    <documentation>The concentration error.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00031</valueType>
  </MetaAttribute>

  <MetaAttribute name="concentrationUnit"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:44_00003"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="concentrationUnit" changeability="changeable"
   forceUndoNotify="true" hicard="1" isAbstract="false" isAutomatic="false"
   isDerived="false" isImplementation="false" isImplicit="false"
   isOrdered="false" isUnique="true" locard="0" scope="instance_level"
   visibility="public_vis">
    <documentation>The concentration unit that should be one of these units: kg/m3 for mass density, mol/L (M) for amount-of-substance concentration, m3/m3 for volume fraction, mol/mol for amount of substance fraction and kg/kg for mass fraction.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00005</valueType>
  </MetaAttribute>

  <MetaRole name="container"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00004"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="container" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>The container component to which the sub components belong.</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00003</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002</valueType>
  </MetaRole>

  <MetaRole name="contents"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00003"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="content" changeability="changeable" forceUndoNotify="true"
   hicard="-1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>List of sub component contained in another component. This is the contents of a component.</documentation>
    <otherRole>www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00004</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002</valueType>
  </MetaRole>

  <MetaAttribute name="details"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:44_00006"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="details" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Free text, for notes, explanatory comments, etc.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00035</valueType>
  </MetaAttribute>

  <MetaOperation name="getRefComponent"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-18:00:46_00004"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived link refComponent</documentation>
    <target>www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00002</target>
    <codeStubs>
      <item tag="python">refSampleComponentStore = self.topObject.refSampleComponentStore
if refSampleComponentStore is None:
  result = None
else:
  result = refSampleComponentStore.findFirstComponent(name=self.name, labeling=self.labeling)</item>
    </codeStubs>
  </MetaOperation>

  <MetaOperation name="getSpectrumHits"
   guid="www.ccpn.ac.uk_Fogh_2015-06-23-18:34:00_00002"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   isAbstract="false" isImplicit="false" isQuery="true" opType="get"
   scope="instance_level" visibility="public_vis">
    <documentation>getter for derived link spectrumHits</documentation>
    <target>www.ccpn.ac.uk_Fogh_2015-06-23-16:34:59_00006</target>
    <codeStubs>
      <item tag="python">name = self.name
result = frozenset(self.sample.findAllSpectrumHits(substanceName =name))</item>
    </codeStubs>
  </MetaOperation>

  <MetaAttribute name="labeling"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-18:00:46_00002"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="labeling" changeability="frozen" forceUndoNotify="true" hicard="1"
   isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>Molecule labeling - part of key and link to refComponent</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00037</valueType>
    <defaultValue>
      <item>std</item>
    </defaultValue>
  </MetaAttribute>

  <MetaAttribute name="name"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-18:00:46_00001"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="name" changeability="frozen" forceUndoNotify="true" hicard="1"
   isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="1" scope="instance_level" visibility="public_vis">
    <documentation>name of substance - part of key and link to RefComponent.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00033</valueType>
  </MetaAttribute>

  <MetaAttribute name="purity"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:44_00005"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="purity" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>The value of the sample component purity, on a scale between 0 and 1</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00058</valueType>
  </MetaAttribute>

  <MetaRole name="refComponent"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00002"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="refComponent" changeability="changeable" forceUndoNotify="true"
   hicard="1" isAbstract="false" isAutomatic="false" isDerived="true"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" noDeleteIfSet="false" partitionsChildren="false"
   scope="instance_level" visibility="public_vis">
    <documentation>The component used as a reference associated to a SampleComponent.</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:52_00057</valueType>
  </MetaRole>

  <MetaAttribute name="role"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-18:00:46_00003"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   baseName="role" changeability="changeable" forceUndoNotify="true" hicard="1"
   isAbstract="false" isAutomatic="false" isDerived="false"
   isImplementation="false" isImplicit="false" isOrdered="false" isUnique="true"
   locard="0" scope="instance_level" visibility="public_vis">
    <documentation>Role of component in sample. E.g. Buffer, solvent, target, screned, ...</documentation>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:53_00033</valueType>
  </MetaAttribute>

  <MetaRole name="sample"
   guid="www.ccpn.ac.uk_Fogh_2006-08-16-18:22:45_00006"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   aggregation="composite" baseName="sample" changeability="frozen"
   forceUndoNotify="true" hicard="1" hierarchy="parent" isAbstract="false"
   isAutomatic="false" isDerived="false" isImplementation="false"
   isImplicit="false" isOrdered="false" isUnique="true" locard="1"
   noDeleteIfSet="false" partitionsChildren="false" scope="instance_level"
   visibility="public_vis">
    <otherRole>www.ccpn.ac.uk_Fogh_2006-08-16-18:22:46_00001</otherRole>
    <valueType>www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00007</valueType>
  </MetaRole>

  <MetaOperation name="setRefComponent"
   guid="www.ccpn.ac.uk_Fogh_2015-06-22-18:00:46_00005"
   container="www.ccpn.ac.uk_Fogh_2006-08-16-14:22:44_00002"
   isAbstract="false" isImplicit="false" isQuery="false" opType="set"
   scope="instance_level" visibility="public_vis">
    <documentation>setter for derived link refComponent</documentation>
    <target>www.ccpn.ac.uk_Fogh_2006-08-16-18:22:42_00002</target>
    <codeStubs>
      <item tag="python">refSampleComponentStore = self.topObject.refSampleComponentStore
if refSampleComponentStore is None:
  self.topObject.refSampleComponentStore = value.topObject
elif refSampleComponentStore is not value.topObject:
  raise ValueError("value %s does not belong to %s" % (value, refSampleComponentStore))
#
self.name = value.name
self.labeling = value.labeling</item>
    </codeStubs>
  </MetaOperation>
</MetaClass>

